### –ß—Ç–æ —Ç–∞–∫–æ–µ Kubernetes (–ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏)

Kubernetes (k8s) ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤).

–û–Ω —Ä–µ—à–∞–µ—Ç –∑–∞–¥–∞—á–∏:
* –≥–¥–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–Ω–∞ –∫–∞–∫–∏—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö)
* —á—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —É–ø–∞–ª
* –∫–∞–∫ –¥–µ—Ä–∂–∞—Ç—å –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫
* –∫–∞–∫ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–µ–∑ –ø—Ä–æ—Å—Ç–æ—è

–ï—Å–ª–∏ Docker ‚Äî —ç—Ç–æ –∫–æ—Ä–æ–±–∫–∞, —Ç–æ Kubernetes ‚Äî —Å–∫–ª–∞–¥, —Ä–æ–±–æ—Ç—ã, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞.

–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã Kubernetes
* Cluster ‚Äî –Ω–∞–±–æ—Ä —Å–µ—Ä–≤–µ—Ä–æ–≤
* Node ‚Äî —Ä–∞–±–æ—á–∏–π —Å–µ—Ä–≤–µ—Ä
* Pod ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä(—ã)
* Deployment ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç Pods
* Service ‚Äî —Å–µ—Ç–µ–≤–æ–π –¥–æ—Å—Ç—É–ø –∫ Pod‚Äô–∞–º
* Namespace ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
* ConfigMap / Secret ‚Äî –∫–æ–Ω—Ñ–∏–≥–∏ –∏ —Å–µ–∫—Ä–µ—Ç—ã
* Ingress ‚Äî –≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø (HTTP)

–†–ê–ó–í–Å–†–¢–´–í–ê–ù–ò–ï –ò –ü–ï–†–í–´–ï –ö–û–ú–ê–ù–î–´
–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
* minikube (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é –¥–ª—è —Å—Ç–∞—Ä—Ç–∞)
* kubectl ‚Äî –≥–ª–∞–≤–Ω—ã–π CLI

–ö–æ–º–∞–Ω–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –±—É–¥–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ:
```bash
kubectl get pods
kubectl get svc
kubectl apply -f app.yaml
kubectl logs pod-name
kubectl describe pod pod-name
kubectl exec -it pod-name -- bash
```

–ü–ï–†–í–´–ï –ú–ê–ù–ò–§–ï–°–¢–´ YAML

Pod:

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: my-pod
spec:
  containers:
    - name: app
      image: nginx
```

Deployment:
- —á—Ç–æ–±—ã –∏–º–µ—Ç—å 2‚Äì10 —Ä–µ–ø–ª–∏–∫, –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

Service (ClusterIP, NodePort, LoadBalancer)
- —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Å–µ—Ç–∏

Ingress
- —á—Ç–æ–±—ã –∫ Service –ø–æ–ø–∞—Å—Ç—å —á–µ—Ä–µ–∑ –¥–æ–º–µ–Ω

–†–ê–ë–û–¢–ê –° –°–û–°–¢–û–Ø–ù–ò–ï–ú
* volumes
* PVC (PersistentVolumeClaim)
* StatefulSet

(–¥–ª—è –ë–î –∏ —Å–µ—Ä–≤–∏—Å–æ–≤, –≥–¥–µ –≤–∞–∂–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –∑–∞–ø—É—Å–∫–∞)

–°–ï–¢–ò + –ò–ù–ì–†–ï–°–°
* Ingress
* Ingress Controller (Traefik, Nginx)
* LoadBalancer

DNS –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞

–ö–û–ù–§–ò–ì–ò
* ConfigMap, Secret

–ü—Ä–∏–º–µ—Ä—ã –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç—ã–µ, –≤—Å—ë –≤ YAML.

–û–ë–ù–û–í–õ–ï–ù–ò–Ø –ò STRATEGIES
* RollingUpdate
* Recreate
* readinessProbe
* livenessProbe

–ü–†–û–î–í–ò–ù–£–¢–û–ï
* Helm (—à–∞–±–ª–æ–Ω—ã)
* Kustomize
* Operators
* CRD (Custom Resource Definitions)
* RBAC
* NetworkPolicies
* Horizontal Pod Autoscaler

### –£–†–û–ö 1. –ß—Ç–æ —Ç–∞–∫–æ–µ Pod –∏ –∫–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–≤–æ–π –ø–µ—Ä–≤—ã–π Pod
#### 1. –ß—Ç–æ —Ç–∞–∫–æ–µ Pod (–ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏)

Pod ‚Äî —ç—Ç–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –≤ Kubernetes.

–û–Ω –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –µ–¥–∏–Ω–æ–µ —Ü–µ–ª–æ–µ.

–ó–∞–ø–æ–º–Ω–∏ –≤–∞–∂–Ω–æ–µ:
* Pod = –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä(—ã) + —Å–µ—Ç—å + —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
* Kubernetes –Ω–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –Ω–∞–ø—Ä—è–º—É—é ‚Üí —Ç–æ–ª—å–∫–æ Pod‚Äô–∞–º–∏
* Pod –∂–∏–≤—ë—Ç –Ω–µ–¥–æ–ª–≥–æ (–µ–≥–æ –º–æ–≥—É—Ç –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å, –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –Ω–∞ –¥—Ä—É–≥–æ–π —É–∑–µ–ª)
* Pod –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π IP, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –±—ã—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º

–ü–æ—á–µ–º—É –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏?

–ü–æ—Ç–æ–º—É —á—Ç–æ Docker ‚Äî —ç—Ç–æ –æ–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä, –∞ Kubernetes ‚Äî –∫–ª–∞—Å—Ç–µ—Ä –∏–∑ –º–Ω–æ–≥–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤.

Kubernetes –Ω—É–∂–µ–Ω –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å ‚Üí Pod.

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π Pod YAML

–°–æ–∑–¥–∞–¥–∏–º Pod, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç nginx.

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª pod.yaml:
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: my-nginx
spec:
  containers:
    - name: nginx
      image: nginx:latest
```
–ó–∞–ø—É—Å–∫–∞–µ–º Pod

‚ö† –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞—é, —á—Ç–æ —É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å:

kubectl

minikube –∏–ª–∏ –¥—Ä—É–≥–æ–π –∫–ª–∞—Å—Ç–µ—Ä

–ï—Å–ª–∏ –Ω–µ—Ç ‚Äî —Å–∫–∞–∂–∏, —É—Å—Ç–∞–Ω–æ–≤–∏–º.

–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞:
```bash
kubectl apply -f pod.yaml
```
–ü—Ä–æ–≤–µ—Ä—è–µ–º:
```bash
kubectl get pods
```

–¢—ã —É–≤–∏–¥–∏—à—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:
```
NAME        READY   STATUS    RESTARTS   AGE
my-nginx    1/1     Running   0          5s
```

–ö–∞–∫ —É–¥–∞–ª–∏—Ç—å Pod
```bash
kubectl delete pod my-nginx
```

### –£–†–û–ö 2. ReplicaSet –∏ Deployment ‚Äî –∫–∞–∫ Kubernetes –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ Pod‚Äô–æ–≤ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–í –ø—Ä–æ—à–ª–æ–º —É—Ä–æ–∫–µ –º—ã —Å–æ–∑–¥–∞–ª–∏ Pod –≤—Ä—É—á–Ω—É—é. –ù–æ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞:

‚ùó–ï—Å–ª–∏ Pod —É–ø–∞–¥—ë—Ç –∏–ª–∏ —Ç—ã —É–¥–∞–ª–∏—à—å –µ–≥–æ ‚Äî Kubernetes –µ–≥–æ –Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç.

‚ùó–ï—Å–ª–∏ –Ω—É–∂–Ω–æ 3 –∫–æ–ø–∏–∏ ‚Äî –ø—Ä–∏–¥—ë—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Ä—É—á–Ω—É—é.

‚ùó–ï—Å–ª–∏ –º–µ–Ω—è–µ—à—å –≤–µ—Ä—Å–∏—é –æ–±—Ä–∞–∑–∞ ‚Äî —Ç–æ–∂–µ –≤—Å—ë –≤—Ä—É—á–Ω—É—é.

‚û° –ü–æ—ç—Ç–æ–º—É –≤ Kubernetes –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç Pod –Ω–∞–ø—Ä—è–º—É—é
(–∫—Ä–æ–º–µ —Ç–µ—Å—Ç–æ–≤ –∏ –æ—Ç–ª–∞–¥–∫–∏).

–ò—Å–ø–æ–ª—å–∑—É—é—Ç Deployment –∏ ReplicaSet.

#### 1. –ß—Ç–æ —Ç–∞–∫–æ–µ ReplicaSet?

ReplicaSet ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Å–ª–µ–¥–∏—Ç, —á—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞–ª–æ –Ω—É–∂–Ω–æ–µ —á–∏—Å–ª–æ Pod‚Äô–æ–≤.

–ù–∞–ø—Ä–∏–º–µ—Ä:

* replicas = 3 ‚Üí Kubernetes –≤—Å–µ–≥–¥–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –¥–µ—Ä–∂–∞—Ç—å 3 –∫–æ–ø–∏–∏
* –µ—Å–ª–∏ 1 —É–ø–∞–ª ‚Üí —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π
* –µ—Å–ª–∏ 1 —É–¥–∞–ª—ë–Ω ‚Üí —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π

–ù–æ ReplicaSet –Ω–µ —É–º–µ–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –ü–æ—ç—Ç–æ–º—É –ø–æ–≤–µ—Ä—Ö ReplicaSet —Å—É—â–µ—Å—Ç–≤—É–µ—Ç Deployment.

#### 2. –ß—Ç–æ —Ç–∞–∫–æ–µ Deployment?

Deployment ‚Äî —ç—Ç–æ:

* —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
* –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑ –ø—Ä–æ—Å—Ç–æ—è (rolling update)
* –æ—Ç–∫–∞—Ç—ã (rollback)
* —Å–æ–∑–¥–∞–Ω–∏–µ ReplicaSet‚Äô–æ–≤
* –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

–≠—Ç–æ —Å–∞–º—ã–π —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Ä–µ—Å—É—Ä—Å –≤ Kubernetes.

#### 3. –ü—Ä–∏–º–µ—Ä Deployment (—Å–æ–∑–¥–∞–¥–∏–º 2 –∫–æ–ø–∏–∏ nginx)

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª deployment.yaml:
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
spec:
  replicas: 2
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
        - name: nginx
          image: nginx:1.25
```
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —á–∞—Å—Ç–µ–π:
* replicas: 2 ‚Üí —Ö–æ—Ç–∏–º 2 Pod‚Äô–∞
* selector/matchLabels ‚Üí –†–µ–ø–ª–∏–∫–∞–°–µ—Ç –±—É–¥–µ—Ç –∏—Å–∫–∞—Ç—å Pod‚Äô—ã —Å —ç—Ç–∏–º label
* template ‚Üí —ç—Ç–æ —à–∞–±–ª–æ–Ω Pod‚Äô–∞
* image ‚Üí –≤–µ—Ä—Å–∏—è nginx

#### 4. –ó–∞–ø—É—Å–∫–∞–µ–º Deployment
```bash
kubectl apply -f deployment.yaml
```
–ü—Ä–æ–≤–µ—Ä—è–µ–º:
```bash
kubectl get deployments
```
–£–≤–∏–¥–∏—à—å:
```
nginx-deployment   2/2   2   2   10s
kubectl get pods
nginx-deployment-7dfbb4b5f9-s8k7q   Running
nginx-deployment-7dfbb4b5f9-dmr24   Running
```
#### 5. –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (—É–≤–µ–ª–∏—á–∏–º –¥–æ 5 —Ä–µ–ø–ª–∏–∫)
```bash
kubectl scale deployment nginx-deployment --replicas=5
```
#### 6. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ (rolling update)

–ü–æ–ø—Ä–æ–±—É–µ–º —Å–º–µ–Ω–∏—Ç—å –≤–µ—Ä—Å–∏—é nginx:

–û—Ç–∫—Ä—ã–≤–∞–µ–º YAML –∏ –º–µ–Ω—è–µ–º:
```yaml
image: nginx:1.26
```
–ü—Ä–∏–º–µ–Ω—è–µ–º:
```bash
kubectl apply -f deployment.yaml
```
–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
```bash
kubectl rollout status deployment nginx-deployment
```
–û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π (rollback)
```bash
kubectl rollout undo deployment nginx-deployment
```
### –£–†–û–ö 3. Service ‚Äî –∫–∞–∫ –æ—Ç–∫—Ä—ã—Ç—å –¥–æ—Å—Ç—É–ø –∫ Pod‚Äô–∞–º –≤–Ω—É—Ç—Ä–∏ –∏ –≤–Ω–µ –∫–ª–∞—Å—Ç–µ—Ä–∞

–°–µ–π—á–∞—Å —É —Ç–µ–±—è —Ä–∞–±–æ—Ç–∞–µ—Ç Deployment, –Ω–∞–ø—Ä–∏–º–µ—Ä –∏–∑ —É—Ä–æ–∫–∞ 2. –ù–æ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞:

‚ùó Pod‚Äô—ã –ø–æ–ª—É—á–∞—é—Ç —Å–ª—É—á–∞–π–Ω—ã–µ IP

‚ùó –ü—Ä–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–∏ Pod IP –º–µ–Ω—è–µ—Ç—Å—è

‚ùó –ù–µ—Å–∫–æ–ª—å–∫–æ Pod‚Äô–æ–≤ ‚Üí –∫–∞–∫–æ–π IP –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

‚ùó –ò–∑–≤–Ω–µ –∫–ª–∞—Å—Ç–µ—Ä–∞ –≤–æ–æ–±—â–µ –Ω–µ –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è

‚û° –ü–æ—ç—Ç–æ–º—É Kubernetes –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Service.

#### 1. –ß—Ç–æ —Ç–∞–∫–æ–µ Service?

Service ‚Äî —ç—Ç–æ —É—Å—Ç–æ–π—á–∏–≤–∞—è —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ Pod‚Äô–∞–º.

Service:
* –∏—â–µ—Ç Pod‚Äô—ã –ø–æ labels
* –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–∞–ª–∞–Ω—Å–∏—Ä—É–µ—Ç –º–µ–∂–¥—É –Ω–∏–º–∏
* –∏–º–µ–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π IP –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞
* –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω —Å–Ω–∞—Ä—É–∂–∏
* —Å–ª—É–∂–∏—Ç ‚Äú—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º‚Äù –¥–ª—è Pod‚Äô–æ–≤

#### 2. –¢–∏–ø—ã Service

–ï—Å—Ç—å 3 —Å–∞–º—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö:

‚úî ClusterIP (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é). –î–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
* backend ‚Üí frontend
* –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Üí –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

‚úî NodePort. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç –Ω–∞ –∫–∞–∂–¥–æ–º —É–∑–ª–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 30080).

–î–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ ‚Üí http://node-ip:30080

‚úî LoadBalancer. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–Ω–µ—à–Ω–∏–π IP —á–µ—Ä–µ–∑ –æ–±–ª–∞—á–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤. 
–í minikube ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–∏–Ω–∏-loadbalancer.

#### 3. –ü—Ä–∏–º–µ—Ä: Service –¥–ª—è Deployment nginx

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª service.yaml:
```yaml
apiVersion: v1
kind: Service
metadata:
  name: nginx-service
spec:
  type: NodePort
  selector:
    app: nginx
  ports:
    - port: 80
      targetPort: 80
      nodePort: 30080
```

–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:

* selector ‚Üí app: nginx. Service –∏—â–µ—Ç Pod‚Äô—ã —Å —ç—Ç–∏–º label.
* port: 80. –ù–∞ –∫–∞–∫–æ–º –ø–æ—Ä—Ç—É —Ä–∞–±–æ—Ç–∞–µ—Ç Service.
* targetPort: 80. –ù–∞ –∫–∞–∫–æ–π –ø–æ—Ä—Ç Pod‚Äô–∞ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º (–≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ nginx —Å–ª—É—à–∞–µ—Ç 80).
* nodePort: 30080. –°–Ω–∞—Ä—É–∂–∏ –º–æ–∂–Ω–æ –∑–∞–π—Ç–∏ –Ω–∞ http://<node-ip>:30080.

#### 4. –ó–∞–ø—É—Å–∫ Service

```bash
kubectl apply -f service.yaml
```
–ü—Ä–æ–≤–µ—Ä—è–µ–º:
```bash
kubectl get svc
```
–£–≤–∏–¥–∏—à—å:
```bash
nginx-service   NodePort   10.96.0.34   <none>   80:30080/TCP   10s
```
#### 5. –û—Ç–∫—Ä—ã—Ç–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã nginx

–ï—Å–ª–∏ —Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å minikube, —Ç–æ:
```bash
minikube service nginx-service
```
‚Üí minikube —Å–∞–º –æ—Ç–∫—Ä–æ–µ—Ç –±—Ä–∞—É–∑–µ—Ä.

–ï—Å–ª–∏ —É —Ç–µ–±—è –æ–±—ã—á–Ω—ã–π –∫–ª–∞—Å—Ç–µ—Ä:

1. –ù–∞–π–¥–∏ IP –Ω–æ–¥—ã: 
```bash
kubectl get nodes -o wide
```
–ü—Ä–∏–º–µ—Ä:
```bash
192.168.49.2
```
2. –û—Ç–∫—Ä—ã–≤–∞–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```bash
http://192.168.49.2:30080
```
–¢—ã –¥–æ–ª–∂–µ–Ω —É–≤–∏–¥–µ—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É nginx: "Welcome to nginx!"

#### 6. –í–∞–∂–Ω–æ–µ: Service —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Labels

–ï—Å–ª–∏ selector –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å label —É Pod ‚Äî Service –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥—ë—Ç.

–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –≤ Deployment —É Pod:
```yaml
labels:
  app: nginx
```
–∏ Service:
```yaml
selector:
  app: nginx
```
### –£–†–û–ö 4. Ingress ‚Äî –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º —á–µ—Ä–µ–∑ –¥–æ–º–µ–Ω—ã –∏ –º–∞—Ä—à—Ä—É—Ç—ã

Service —Ç–∏–ø–∞ NodePort/LoadBalancer ‚Äî —ç—Ç–æ —Ö–æ—Ä–æ—à–æ, –Ω–æ:

‚ùó –ü–æ—Ä—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —É–∫–∞–∑—ã–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é (30080, 30081‚Ä¶)

‚ùó –ù–µ–ª—å–∑—è —É–¥–æ–±–Ω–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫ –ø–æ –ø—É—Ç–∏ (/api, /web)

‚ùó –ù–µ–ª—å–∑—è –ø—Ä–∏–≤—è–∑–∞—Ç—å –¥–æ–º–µ–Ω—ã (app.example.com)

‚ùó –ü—Ä–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö ‚Äî –ø–æ–ª–Ω—ã–π —Ö–∞–æ—Å

‚û° –†–µ—à–µ–Ω–∏–µ: Ingress.

1. –ß—Ç–æ —Ç–∞–∫–æ–µ Ingress (–ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏)

Ingress ‚Äî —ç—Ç–æ:
* ‚Äú–≤–Ω–µ—à–Ω–∏–π Entry Point‚Äù –≤ –∫–ª–∞—Å—Ç–µ—Ä
* HTTP/HTTPS –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
* –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–º–µ–Ω–æ–≤ –∏ –ø—É—Ç–µ–π
* SSL/TLS termination
* –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
* –ù–æ —Å–∞–º Ingress –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞.

2. –ß—Ç–æ —Ç–∞–∫–æ–µ Ingress Controller?
* –≠—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç—Ä–∞—Ñ–∏–∫.

–ß–∞—â–µ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç:
* nginx-ingress (—Å–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π)
* traefik
* haproxy
* istio-gateway (–≤ —Å–µ—Ä–≤–∏—Å-–º–µ—à–∞—Ö)

–ï—Å–ª–∏ —Ç—ã —Ä–∞–±–æ—Ç–∞–µ—à—å –≤ minikube, —Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Å—Ç–∞—è:
```bash
minikube addons enable ingress
```
–ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
kubectl get pods -n ingress-nginx
```
–£–≤–∏–¥–∏—à—å –Ω–µ—Å–∫–æ–ª—å–∫–æ Pod‚Äô–æ–≤.

3. –ü—Ä–∏–º–µ—Ä: Ingress –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–∞—à–µ–º—É nginx

–°–æ–∑–¥–∞–π ingress.yaml:
```yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: nginx-ingress
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
spec:
  ingressClassName: nginx
  rules:
    - host: myapp.local
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: nginx-service
                port:
                  number: 80
```
4. –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç Ingress?
* –ª–æ–≤–∏—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –¥–æ–º–µ–Ω myapp.local
* –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ –Ω–∞—à Service ‚Üí nginx-service
* –ø–æ –ø–æ—Ä—Ç—É 80 (—Ç–æ—Ç –∂–µ, —á—Ç–æ –º—ã —É–∫–∞–∑–∞–ª–∏ –≤ service.yaml)
* —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Ingress Controller

5. –ó–∞–ø—É—Å–∫ Ingress
```bash
kubectl apply -f ingress.yaml 
```
–ü—Ä–æ–≤–µ—Ä—è–µ–º:
```bash
kubectl get ingress
```
–£–≤–∏–¥–∏—à—å –ø—Ä–∏–º–µ—Ä–Ω–æ:
```bash
nginx-ingress   myapp.local   192.168.49.2   80   1m
```
6. –ö–∞–∫ –æ—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç —á–µ—Ä–µ–∑ –¥–æ–º–µ–Ω?

Ingress —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ IP –Ω–æ–¥—ã –∏–ª–∏ load balancer'–∞.

–£–∑–Ω–∞—ë–º IP:
```bash
minikube ip
```
–ü—Ä–∏–º–µ—Ä:
```bash
192.168.49.2
```
–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ hosts –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ.

–û—Ç–∫—Ä–æ–π:
* Windows: C:\Windows\System32\drivers\etc\hosts
* Linux/macOS: /etc/hosts

–î–æ–±–∞–≤—å —Å—Ç—Ä–æ–∫—É:
```bash
192.168.49.2   myapp.local
```
–¢–µ–ø–µ—Ä—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ –æ—Ç–∫—Ä–æ–π:
```bash
http://myapp.local
```
### –£–†–û–ö 5. ConfigMap –∏ Secret ‚Äî –∫–∞–∫ —Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ Kubernetes

–ö–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Docker/Kubernetes, –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—ã—á–Ω–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ —Ñ–∞–π–ª—ã.

‚ùó –ù–µ–ª—å–∑—è —Ö–∞—Ä–¥–∫–æ–¥–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

‚ùó –ù–µ–ª—å–∑—è –≤–ø–∏—Å—ã–≤–∞—Ç—å –ø–∞—Ä–æ–ª–∏ –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã YAML

‚ùó –ù–µ–ª—å–∑—è –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—Ç—å –æ–±—Ä–∞–∑ —Ä–∞–¥–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –∫–æ–Ω—Ñ–∏–≥–∞

‚û° Kubernetes —Ä–µ—à–∞–µ—Ç —ç—Ç–æ –¥–≤—É–º—è –æ–±—ä–µ–∫—Ç–∞–º–∏:

ConfigMap ‚Äî –æ–±—ã—á–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏

Secret ‚Äî –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø–∞—Ä–æ–ª–∏, —Ç–æ–∫–µ–Ω—ã, –∫–ª—é—á–∏)

1. ConfigMap ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–±—ã—á–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
* –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
* —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ (yaml, json, ini)
* –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ü—Ä–∏–º–µ—Ä: ConfigMap —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª configmap.yaml:
```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: my-config
data:
  APP_MODE: "production"
  APP_VERSION: "1.0"
  MESSAGE: "Hello from ConfigMap!"
```
–ü—Ä–∏–º–µ–Ω—è–µ–º:
```bash
kubectl apply -f configmap.yaml
```
–ü—Ä–æ–≤–µ—Ä—è–µ–º:
```bash
kubectl get configmap
kubectl describe configmap my-config
```
2. –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ConfigMap –≤ Pod/Deployment?
–í–∞—Ä–∏–∞–Ω—Ç A: —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í Deployment –¥–æ–±–∞–≤–ª—è–µ–º:
```yaml
env:
  - name: APP_MODE
    valueFrom:
      configMapKeyRef:
        name: my-config
        key: APP_MODE
```
–í–∞—Ä–∏–∞–Ω—Ç B: –ø–æ–¥–∫–ª—é—á–∏—Ç—å –≤–µ—Å—å ConfigMap
```yaml
envFrom:
  - configMapRef:
      name: my-config
```
–¢–æ–≥–¥–∞ –≤—Å–µ –∫–ª—é—á–∏ —Å—Ç–∞–Ω—É—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

3. –ü—Ä–∏–º–µ—Ä Deployment, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π ConfigMap

–§–∞–π–ª deployment-with-config.yaml:
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: test-app
spec:
  replicas: 1
  selector:
    matchLabels:
      app: test-app
  template:
    metadata:
      labels:
        app: test-app
    spec:
      containers:
        - name: app
          image: nginx
          envFrom:
            - configMapRef:
                name: my-config
```
–ü—Ä–∏–º–µ–Ω—è–π:
```bash
kubectl apply -f deployment-with-config.yaml
```
–ü—Ä–æ–≤–µ—Ä—å:
```bash
kubectl exec -it <pod-name> -- env | grep APP
```
4. Secret ‚Äî –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
* –ø–∞—Ä–æ–ª–∏
* API –∫–ª—é—á–∏
* —Ç–æ–∫–µ–Ω—ã
* —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

–î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ base64, –Ω–æ –ù–ï —Å—á–∏—Ç–∞—é—Çc—è –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ –Ω–∞ 100% ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ –ø—Ä–æ—á—Ç–µ–Ω–∏—è.

–ü—Ä–∏–º–µ—Ä: Secret

–°–æ–∑–¥–∞–π secret.yaml:
```yaml
apiVersion: v1
kind: Secret
metadata:
  name: my-secret
type: Opaque
data:
  DB_PASSWORD: cGFzc3dvcmQ=
```
cGFzc3dvcmQ= = base64("password")

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∞–º:
```bash
echo -n 'password' | base64
```
–ü—Ä–∏–º–µ–Ω—è–µ–º:
```bash
kubectl apply -f secret.yaml
kubectl describe secret my-secret
```
5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Secret –≤ Deployment
```yaml
env:
  - name: DB_PASSWORD
    valueFrom:
      secretKeyRef:
        name: my-secret
        key: DB_PASSWORD
```
Kubernetes –ø–æ–¥—Å—Ç–∞–≤–∏—Ç —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

6. –í–∞–∂–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ ConfigMap vs Secret

| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å               | ConfigMap | Secret |
|---------------------------|-----------|--------|
| –•—Ä–∞–Ω–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö | ‚úî         | ‚ùå      |
| –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π/–∫–ª—é—á–µ–π   | ‚ùå         | ‚úî      |
| Base64 encoding           | ‚ùå         | ‚úî      |
| Volume mount              | ‚úî         | ‚úî      |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ env       | ‚úî         | ‚úî      |

		
–£–†–û–ö 6. Volumes, PersistentVolume –∏ PersistentVolumeClaim
1. –ü–æ—á–µ–º—É –Ω—É–∂–Ω—ã Volumes?

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Pod —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–π FS, –∫–æ—Ç–æ—Ä–∞—è –∏—Å—á–µ–∑–∞–µ—Ç –∫–æ–≥–¥–∞ Pod:
* –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
* –ø–µ—Ä–µ—Å–æ–∑–¥–∞—ë—Ç—Å—è
* –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –Ω–∞ –¥—Ä—É–≥–æ–π Node

üëâ –¢–æ –µ—Å—Ç—å –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Ñ–∞–π–ª—ã –ª–æ–≥–æ–≤ ‚Äî –≤—Å—ë –∏—Å—á–µ–∑–Ω–µ—Ç.

‚û° –ü–æ—ç—Ç–æ–º—É Kubernetes –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.

2. –í–∏–¥—ã —Ö—Ä–∞–Ω–∏–ª–∏—â –≤ Kubernetes
–û—Å–Ω–æ–≤–Ω—ã–µ:
* emptyDir ‚Äî –≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–ø–∫–∞ (—É–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ Pod)
* hostPath ‚Äî –ø—É—Ç—å –Ω–∞ Node (—Ä–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
* PersistentVolume (PV) ‚Äî –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
* PersistentVolumeClaim (PVC) ‚Äî –∑–∞–ø—Ä–æ—Å —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –æ—Ç Pod
* StorageClass ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ PV

3. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ PV –∏ PVC

–í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å:
* PV ‚Äî —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–¥–∏—Å–∫, NFS, –æ–±–ª–∞–∫–æ)
* PVC ‚Äî –∑–∞–ø—Ä–æ—Å, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç Pod
* Kubernetes —Å–≤—è–∑—ã–≤–∞–µ—Ç PVC ‚Üí PV –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

–ö–∞–∫ –∞—Ä–µ–Ω–¥–∞ –∫–≤–∞—Ä—Ç–∏—Ä—ã:
* PVC = —Å—ä—ë–º—â–∏–∫
* PV = –∫–≤–∞—Ä—Ç–∏—Ä–∞
* StorageClass = —Ä–∏–µ–ª—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–±–∏—Ä–∞–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â—É—é –∫–≤–∞—Ä—Ç–∏—Ä—É

4. –ü—Ä–∏–º–µ—Ä: —Å–æ–∑–¥–∞—ë–º PersistentVolume

–°–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª pv.yaml:
```yaml
apiVersion: v1
kind: PersistentVolume
metadata:
  name: my-pv
spec:
  capacity:
    storage: 1Gi
  accessModes:
    - ReadWriteOnce
  hostPath:
    path: "/mnt/data"
```
–ü—Ä–∏–º–µ–Ω—è–µ–º:
```bash
kubectl apply -f pv.yaml
kubectl get pv
```
–°–æ–∑–¥–∞—ë–º PVC ‚Äî –∑–∞–ø—Ä–æ—Å —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

–°–æ–∑–¥–∞—ë–º pvc.yaml:
```yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: my-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 1Gi
```
–ü—Ä–∏–º–µ–Ω—è–µ–º:
```bash
kubectl apply -f pvc.yaml
kubectl get pvc
```
–ü–æ—Å–ª–µ —Å–≤—è–∑—ã–≤–∞–Ω–∏—è PV –∏ PVC:
```bash
STATUS: Bound
```
6. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PVC –≤ Pod / Deployment

–°–æ–∑–¥–∞—ë–º deployment-with-volume.yaml:
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: volume-demo
spec:
  replicas: 1
  selector:
    matchLabels:
      app: volume-demo
  template:
    metadata:
      labels:
        app: volume-demo
    spec:
      containers:
        - name: app
          image: nginx
          volumeMounts:
            - name: storage
              mountPath: /usr/share/nginx/html
      volumes:
        - name: storage
          persistentVolumeClaim:
            claimName: my-pvc
```

–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
* PVC –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫–∞–∫ Volume
* nginx –±—É–¥–µ—Ç —á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª—ã –∏–∑ /usr/share/nginx/html
* –≤—Å—ë, —á—Ç–æ –∑–∞–ø–∏—à–µ—à—å —Ç—É–¥–∞, –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ Pod

7. –ü—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

1. –ü—Ä–∏–º–µ–Ω—è–µ—à—å Deployment

2. –ó–∞—Ö–æ–¥–∏—à—å –≤ Pod:
```bash
kubectl exec -it <pod> -- sh
```
3. –°–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª:
```bash
echo "Hello with PVC" > /usr/share/nginx/html/index.html
```
4. –û—Ç–∫—Ä—ã–≤–∞–µ—à—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ
(—á–µ—Ä–µ–∑ Service –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —É—Ä–æ–∫–∞)

5. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Pod:
```bash
kubectl delete pod <pod>
```
6. –ü—Ä–æ–≤–µ—Ä—è–µ—à—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–Ω–æ–≤–∞ ‚Üí –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å.

8. –ß—Ç–æ —Ç–∞–∫–æ–µ StorageClass (–∫–æ—Ä–æ—Ç–∫–æ)

–í —Ä–µ–∞–ª—å–Ω—ã—Ö —Å—Ä–µ–¥–∞—Ö PV –≤—Ä—É—á–Ω—É—é –Ω–µ —Å–æ–∑–¥–∞—é—Ç.

StorageClass –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
* –≤ –æ–±–ª–∞–∫–∞—Ö ‚Üí –¥–∏—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
* –≤ minikube ‚Üí —Ç–æ–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

–ü—Ä–∏–º–µ—Ä:
```bash
kubectl get storageclass
```
### –£–†–û–ö 7. StatefulSet ‚Äî –¥–ª—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è

Deployment –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è stateless-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (nginx, api, frontend).
–ù–æ –µ—Å—Ç—å –∫–ª–∞—Å—Å —Å–µ—Ä–≤–∏—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–Ω—ã:

* ‚úî –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –∏–º–µ–Ω–∞ Pod
* ‚úî —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–º–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ Pod
* ‚úî –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –∑–∞–ø—É—Å–∫–∞ (0 ‚Üí 1 ‚Üí 2)
* ‚úî –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ —É–¥–∞–ª–µ–Ω–∏—è
* ‚úî –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∫–∞–∂–¥–æ–º—É Pod –æ—Ç–¥–µ–ª—å–Ω–æ

–≠—Ç–æ ‚Äî –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, Kafka, Redis, RabbitMQ, Elasticsearch, –∏ —Ç. –¥.

–ò —Ç—É—Ç Deployment —É–∂–µ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç.

‚û° –î–ª—è —ç—Ç–æ–≥–æ –≤ Kubernetes –µ—Å—Ç—å StatefulSet.

1. –ß—Ç–æ —Ç–∞–∫–æ–µ StatefulSet (–ø—Ä–æ—Å—Ç–æ)

StatefulSet ‚Äî —ç—Ç–æ Deployment, –Ω–æ "—Å –ø–∞–º—è—Ç—å—é":

Pod –ø–æ–ª—É—á–∞—é—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –∏–º–µ–Ω–∞:
```bash
app-0
app-1
app-2
```
- –ö–∞–∂–¥—ã–π Pod –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –æ—Ç–¥–µ–ª—å–Ω—ã–π PVC
- –≠—Ç–∏ PVC —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–∞–∂–µ –µ—Å–ª–∏ Pod —É–¥–∞–ª—ë–Ω
- –ü–æ–¥–Ω–∏–º–∞—é—Ç—Å—è —Å—Ç—Ä–æ–≥–æ –ø–æ –ø–æ—Ä—è–¥–∫—É
- Scale-up –∏ scale-down —Ç–æ–∂–µ –ø–æ –ø–æ—Ä—è–¥–∫—É

2. –ü—Ä–æ—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ StatefulSet

StatefulSet –æ–±—ã—á–Ω–æ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:
* StatefulSet
* Headless Service (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ PVC, —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–µ –ø–æ —à–∞–±–ª–æ–Ω—É

Headless Service –Ω—É–∂–µ–Ω, —á—Ç–æ–±—ã –∫–∞–∂–¥—ã–π Pod –∏–º–µ–ª DNS-–∏–º—è:
```bash
app-0.my-service.default.svc.cluster.local
app-1.my-service.default.svc.cluster.local
```
–≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö —Å –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–µ–π.

3. –ü—Ä–∏–º–µ—Ä: –ø—Ä–æ—Å—Ç–æ–π StatefulSet —Å nginx

–°–æ–∑–¥–∞–¥–∏–º —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä.

üîπ –®–∞–≥ 1. Headless Service

–°–æ–∑–¥–∞—ë–º headless.yaml:
```yaml
apiVersion: v1
kind: Service
metadata:
  name: nginx-headless
spec:
  clusterIP: None
  selector:
    app: nginx-stateful
  ports:
    - port: 80
```
üí° clusterIP: None –æ–∑–Ω–∞—á–∞–µ—Ç "headless".

üîπ –®–∞–≥ 2. StatefulSet

–°–æ–∑–¥–∞—ë–º statefulset.yaml:
```yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: nginx-stateful
spec:
  serviceName: nginx-headless
  replicas: 3
  selector:
    matchLabels:
      app: nginx-stateful
  template:
    metadata:
      labels:
        app: nginx-stateful
    spec:
      containers:
        - name: nginx
          image: nginx
          volumeMounts:
            - name: data
              mountPath: /usr/share/nginx/html
  volumeClaimTemplates:
    - metadata:
        name: data
      spec:
        accessModes: ["ReadWriteOnce"]
        resources:
          requests:
            storage: 1Gi
```
–í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:
* volumeClaimTemplates ‚Üí —Å–æ–∑–¥–∞—ë—Ç PVC –¥–ª—è –∫–∞–∂–¥–æ–≥–æ Pod
* —Å–æ–∑–¥–∞—Å—Ç:
```bash
data-nginx-stateful-0
data-nginx-stateful-1
data-nginx-stateful-2
```
* Pod‚Äô—ã –±—É–¥—É—Ç –Ω–∞–∑—ã–≤–∞—Ç—å—Å—è:
```bash
nginx-stateful-0
nginx-stateful-1
nginx-stateful-2
```
üîµ 4. –ó–∞–ø—É—Å–∫ StatefulSet
```bash
kubectl apply -f headless.yaml
kubectl apply -f statefulset.yaml
```
–ü—Ä–æ–≤–µ—Ä—è–µ–º:
```bash
kubectl get statefulset
kubectl get pods
kubectl get pvc
```
–¢—ã —É–≤–∏–¥–∏—à—å:
```bash
nginx-stateful-0  Running
nginx-stateful-1  Running
nginx-stateful-2  Running
```
PVC:
```bash
data-nginx-stateful-0  Bound
data-nginx-stateful-1  Bound
data-nginx-stateful-2  Bound
```
üîµ 5. –ü—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ —Ç–æ–º–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ

–ó–∞–π–¥–∏ –≤ Pod ‚Ññ0:
```bash
kubectl exec -it nginx-stateful-0 -- sh
echo "Hello from pod 0" > /usr/share/nginx/html/index.html
```
–ü–æ—Ç–æ–º –∑–∞–π–¥–∏ –≤ Pod ‚Ññ1:
```bash
kubectl exec -it nginx-stateful-1 -- sh
cat /usr/share/nginx/html/index.html
```
üëâ –¢—ã –ù–ï —É–≤–∏–¥–∏—à—å —Ç–µ–∫—Å—Ç Pod0 ‚Äî —É –∫–∞–∂–¥–æ–≥–æ Pod —Å–≤–æ–π –¥–∏—Å–∫.

üîµ 6. –ü—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

–£–¥–∞–ª–∏–º Pod:
```bash
kubectl delete pod nginx-stateful-0
```
Kubernetes –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Å—Ç –µ–≥–æ —Å —Ç–µ–º –∂–µ –∏–º–µ–Ω–µ–º ‚Üí nginx-stateful-0.

–¢–µ–ø–µ—Ä—å:
```bash
kubectl exec -it nginx-stateful-0 -- sh
cat /usr/share/nginx/html/index.html
```
üìå –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è ‚Üí PVC –Ω–µ –∏—Å—á–µ–∑–∞–µ—Ç –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ Pod.

üîµ 7. –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å StatefulSet?
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

* ‚úî –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (PostgreSQL, MySQL, MongoDB)
* ‚úî –æ—á–µ—Ä–µ–¥–∏ (RabbitMQ, Kafka)
* ‚úî —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (MinIO, Ceph)
* ‚úî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Ç—Ä–µ–±—É—é—â–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö DNS-–∏–º–µ–Ω

–ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

* ‚ùå stateless –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
* ‚ùå API
* ‚ùå —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ã

### –£–†–û–ö 8. Liveness, Readiness, Startup Probes

–≠—Ç–∏ —Ç—Ä–∏ –º–µ—Ö–∞–Ω–∏–∑–º–∞ –ø–æ–º–æ–≥–∞—é—Ç Kubernetes —Å–ª–µ–¥–∏—Ç—å –∑–∞ –∑–¥–æ—Ä–æ–≤—å–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –∏—Ö, –Ω–µ –ø—É—Å–∫–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫ —Ä–∞–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –∏ –Ω–µ —É–±–∏–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏ –¥–æ–ª–≥–æ–π –∑–∞–≥—Ä—É–∑–∫–µ.

‚≠ê 1. –ó–∞—á–µ–º –Ω—É–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ (probes) –≤ Kubernetes

Kubernetes –Ω–µ –∑–Ω–∞–µ—Ç:

- –∑–∞–ø—É—Å—Ç–∏–ª–æ—Å—å –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –∑–∞–≤–∏—Å–ª–æ –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –≥–æ—Ç–æ–≤–æ –ª–∏ –æ–Ω–æ –æ—Ç–¥–∞–≤–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫
- –Ω—É–∂–Ω–æ –ª–∏ –ø–æ–¥–æ–∂–¥–∞—Ç—å –¥–æ–ª—å—à–µ (–º–µ–¥–ª–µ–Ω–Ω—ã–π —Å—Ç–∞—Ä—Ç)

–ë–µ–∑ probes –±—ã–≤–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã:

* ‚ùå Pod –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ
* ‚ùå –°–µ—Ä–≤–∏—Å —à–ª—ë—Ç —Ç—Ä–∞—Ñ–∏–∫ –≤ Pod, –∫–æ—Ç–æ—Ä—ã–π –µ—â—ë –Ω–µ –≥–æ—Ç–æ–≤
* ‚ùå –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–∏—Å–∏—Ç, –Ω–æ Kubernetes –¥—É–º–∞–µ—Ç, —á—Ç–æ –æ–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
* ‚ùå –ü—Ä–∏ –¥–µ–ø–ª–æ–µ 50% –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–∞–¥–∞—é—Ç –Ω–∞ –Ω–µ–¥–æ–≥—Ä—É–∂–µ–Ω–Ω—ã–µ Pod‚Äô—ã

üîµ 2. –¢–∏–ø—ã probes

Kubernetes –∑–Ω–∞–µ—Ç —Ç—Ä–∏ —Ç–∏–ø–∞:

‚úî Liveness Probe ‚Äî –∂–∏–≤ –ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. –ï—Å–ª–∏ liveness –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç ‚Üí Kubernetes –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:

- –∑–∞–≤–∏—Å—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- –¥–µ–¥–ª–æ–∫–æ–≤
- –∑–∞–≤–∏—Å—à–µ–≥–æ event-loop, –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö CPU

‚úî Readiness Probe ‚Äî –≥–æ—Ç–æ–≤ –ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫

–ï—Å–ª–∏ readiness –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç ‚Üí Kubernetes –∏—Å–∫–ª—é—á–∞–µ—Ç Pod –∏–∑ load balancing,
–Ω–æ –Ω–µ —É–±–∏–≤–∞–µ—Ç.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
- –∑–∞–¥–µ—Ä–∂–∫–∏ —Å—Ç–∞—Ä—Ç–∞ (DB migrations, –∫—ç—à –ø—Ä–æ–≥—Ä–µ–≤)
- —Å–µ—Ä–≤–∏—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–Ω–∏–º–∞—é—Ç—Å—è –¥–æ–ª–≥–æ
- graceful shutdown

‚úî Startup Probe ‚Äî –Ω—É–∂–µ–Ω –ª–∏ –¥–æ–ª–≥–∏–π —Å—Ç–∞—Ä—Ç

–ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä, 1‚Äì5 –º–∏–Ω—É—Ç ‚Üí Startup probe ¬´—â–∞–¥–∏—Ç¬ª Pod.

–ü–æ–∫–∞ startup probe –Ω–µ –ø—Ä–æ—à–ª–∞ ‚Üí liveness –∏ readiness –ù–ï –∞–∫—Ç–∏–≤–Ω—ã.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:

- Spring Boot —Å –¥–ª–∏–Ω–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
- .NET Core —Ö–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç
- –±–æ–ª—å—à–∏–µ ML-–º–æ–¥–µ–ª–∏

üîµ 3. –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è probes

‚úî 3.1. HTTP-–ø—Ä–æ–≤–µ—Ä–∫–∞

–û–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç endpoint:
```yaml
livenessProbe:
  httpGet:
    path: /healthz
    port: 8080
  initialDelaySeconds: 5
  periodSeconds: 10

readinessProbe:
  httpGet:
    path: /ready
    port: 8080
  initialDelaySeconds: 3
  periodSeconds: 5
```
‚úî 3.2. TCP-–ø—Ä–æ–≤–µ—Ä–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä Redis)
```yaml
livenessProbe:
  tcpSocket:
    port: 6379
  periodSeconds: 10
```
‚úî 3.3. Exec-–ø—Ä–æ–≤–µ—Ä–∫–∞ (–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã)
```yaml
livenessProbe:
  exec:
    command: ["pg_isready", "-U", "postgres"]
```

4. –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è —Å probes

deployment.yaml:
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: probe-example
spec:
  replicas: 2
  selector:
    matchLabels:
      app: probe-app
  template:
    metadata:
      labels:
        app: probe-app
    spec:
      containers:
        - name: app
          image: nginx
          ports:
            - containerPort: 80

          startupProbe:
            httpGet:
              path: /
              port: 80
            failureThreshold: 30
            periodSeconds: 5

          livenessProbe:
            httpGet:
              path: /
              port: 80
            initialDelaySeconds: 10
            periodSeconds: 10

          readinessProbe:
            httpGet:
              path: /
              port: 80
            initialDelaySeconds: 5
            periodSeconds: 5
```
–ó–¥–µ—Å—å:

* startupProbe –¥–∞—Å—Ç 150 —Å–µ–∫—É–Ω–¥ –≤—Ä–µ–º–µ–Ω–∏, —á—Ç–æ–±—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –∑–∞–≥—Ä—É–∑–∏–ª–æ—Å—å
* livenessProbe –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –µ—Å–ª–∏ –æ–Ω –∑–∞–≤–∏—Å
* readinessProbe –±—É–¥–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç—Ä–∞—Ñ–∏–∫–æ–º

üîµ 5. –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å probes –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:
```bash
kubectl describe pod <pod-name>
```

–¢—ã —É–≤–∏–¥–∏—à—å:
* Liveness probe failed
* Readiness probe succeeded
* Killing container app
* NotReady

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å.

### –£–†–û–ö 9. DaemonSet ‚Äî –∫–æ–≥–¥–∞ Pod –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ –∫–∞–∂–¥–æ–π –Ω–æ–¥–µ

DaemonSet ‚Äî —ç—Ç–æ —Ç–∏–ø –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –Ω–∞ –∫–∞–∂–¥–æ–π –Ω–æ–¥–µ –∫–ª–∞—Å—Ç–µ—Ä–∞ –∑–∞–ø—É—â–µ–Ω —Ä–æ–≤–Ω–æ –æ–¥–∏–Ω Pod.

–≠—Ç–æ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ—Å—Ç—å Deployment, –≥–¥–µ Pods –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ.

üîµ 1. –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è DaemonSet

–≠—Ç–æ –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ –≤ Kubernetes, –∏ –µ–≥–æ —á–∞—Å—Ç–æ –Ω–µ –ø–æ–Ω–∏–º–∞—é—Ç –Ω–æ–≤–∏—á–∫–∏.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–¥–∞—á:

- ‚úî –õ–æ–≥–∏
- ‚úî –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚úî –°–µ—Ç–µ–≤—ã–µ –∞–≥–µ–Ω—Ç—ã
- ‚úî Storage –∞–≥–µ–Ω—Ç—ã
- ‚úî Node-level —Å–µ—Ä–≤–∏—Å—ã

–ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∞–ª—å–Ω—ã—Ö DaemonSet:

- fluentd / filebeat / logstash ‚Äî —Å–±–æ—Ä –ª–æ–≥–æ–≤ —Å –∫–∞–∂–¥–æ–π –Ω–æ–¥—ã
- Prometheus node-exporter ‚Äî –º–µ—Ç—Ä–∏–∫–∏ –Ω–æ–¥—ã
- CNI –ø–ª–∞–≥–∏–Ω—ã ‚Äî calico, flannel, cilium
- Kube-proxy
- NVIDIA GPU device plugin

–≠—Ç–∏ —Å–µ—Ä–≤–∏—Å—ã –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –ö–ê–ñ–î–û–ô –Ω–æ–¥–µ ‚Üí –∑–Ω–∞—á–∏—Ç –Ω—É–∂–µ–Ω DaemonSet.

üîµ 2. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç DaemonSet

DaemonSet –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç:
- –æ–¥–∏–Ω Pod –Ω–∞ –∫–∞–∂–¥—É—é –Ω–æ–¥—É
- –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–¥—ã ‚Üí Pod —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –Ω–æ–¥—ã ‚Üí Pod —É–¥–∞–ª—è–µ—Ç—Å—è
- –ø—Ä–∏ taints/tolerations –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –Ω—É–∂–Ω—ã—Ö –Ω–æ–¥–∞—Ö

üîµ 3. –ü—Ä–∏–º–µ—Ä DaemonSet

–°–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª daemonset.yaml:

```yaml
apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: log-agent
spec:
  selector:
    matchLabels:
      app: log-agent
  template:
    metadata:
      labels:
        app: log-agent
    spec:
      containers:
        - name: log-agent
          image: busybox
          command: ["sh", "-c", "while true; do echo 'log agent running'; sleep 10; done"]
```

–ü—Ä–∏–º–µ–Ω—è–µ–º:
```bash
kubectl apply -f daemonset.yaml
```
–°–º–æ—Ç—Ä–∏–º Pods:
```bash
kubectl get pods -o wide
```
–¢—ã —É–≤–∏–¥–∏—à—å:
- –æ–¥–∏–Ω Pod –Ω–∞ –∫–∞–∂–¥—É—é Node
- –∫–∞–∂–¥–æ–≥–æ Pod —Å–≤–æ–π NODE –≤ —Å—Ç–æ–ª–±—Ü–µ

üîµ 4. –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω: –∑–∞–ø—É—Å–∫ DaemonSet —á–µ—Ä–µ–∑ Deployment

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω–æ–≤–∏—á–∫–∏ –ø—ã—Ç–∞—é—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å "–ø–æ –æ–¥–Ω–æ–º—É Pod –Ω–∞ –Ω–æ–¥—É" —á–µ—Ä–µ–∑ Deployment —Å nodeAffinity.

‚ùå –û—à–∏–±–∫–∞.

* –ï—Å–ª–∏ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ 5 –Ω–æ–¥ ‚Üí –±—É–¥–µ—Ç 5 Pod
* –ï—Å–ª–∏ –æ–¥–Ω–∞ –Ω–æ–¥–∞ —É–ø–∞–ª–∞ ‚Üí –æ—Å—Ç–∞–Ω–µ—Ç—Å—è 4
* –ï—Å–ª–∏ –¥–æ–±–∞–≤–∏–ª–∏ –Ω–æ–≤—É—é –Ω–æ–¥—É ‚Üí Deployment —Å–∞–º –Ω–µ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π Pod

–ü–æ—ç—Ç–æ–º—É —Ç–∞–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ DaemonSet.

üîµ 5. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DaemonSet
‚úî tolerations (—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ tainted –Ω–æ–¥–∞—Ö)
```yaml
tolerations:
  - operator: Exists
```
–ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤.

‚úî nodeSelector / affinity (–∑–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ –Ω–∞ GPU –Ω–æ–¥–∞—Ö)
```yaml
nodeSelector:
  gpu: "true"
```
‚úî update strategy

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Üí RollingUpdate.
```yaml
updateStrategy:
  type: RollingUpdate
```
6. –ö–∞–∫ —É–¥–∞–ª–∏—Ç—å Pod DaemonSet?

–ï—Å–ª–∏ –ø–æ–ø—Ä–æ–±—É–µ—à—å:
```bash
kubectl delete pod name
```
Kubernetes –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Å—Ç –µ–≥–æ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ.

–ß—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚Üí —É–¥–∞–ª—è—é—Ç –≤–µ—Å—å DaemonSet:
```bash
kubectl delete daemonset log-agent
```
### –£–†–û–ö 10. Job –∏ CronJob ‚Äî —Ñ–æ–Ω–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞ –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
üîµ 1. –ó–∞—á–µ–º –Ω—É–∂–Ω—ã Job –∏ CronJob

–í Kubernetes –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Pod.
–ù–æ –∏–Ω–æ–≥–¥–∞ –Ω–∞–º –Ω—É–∂–Ω–æ:

–í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–¥–∞—á—É –æ–¥–∏–Ω —Ä–∞–∑ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –º–∏–≥—Ä–∞—Ü–∏—é –±–∞–∑—ã)

–í—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–¥–∞—á—É –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä: –±—ç–∫–∞–ø, –æ—á–∏—Å—Ç–∫–∞, –æ—Ç—á—ë—Ç—ã)

‚úÖ –î–ª—è —ç—Ç–æ–≥–æ –µ—Å—Ç—å:

Job ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

CronJob ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (–∫–∞–∫ cron –≤ Linux)

üîµ 2. Job ‚Äî –ø—Ä–∏–º–µ—Ä –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–π –∑–∞–¥–∞—á–∏

–°–æ–∑–¥–∞–¥–∏–º job.yaml:
```yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: hello-job
spec:
  template:
    spec:
      containers:
        - name: hello
          image: busybox
          command: ["sh", "-c", "echo Hello Kubernetes! && sleep 5"]
      restartPolicy: Never
  backoffLimit: 3
```
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:

restartPolicy: Never ‚Üí Pod –Ω–µ –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ø—Ä–∏ —É—Å–ø–µ—Ö–µ

backoffLimit: 3 ‚Üí –º–∞–∫—Å–∏–º—É–º 3 –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ

command ‚Üí —Ç–æ, —á—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑

–ó–∞–ø—É—Å–∫:
```bash
kubectl apply -f job.yaml
kubectl get jobs
kubectl get pods
```
–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Pod –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Å Completed.

üîµ 3. CronJob ‚Äî –ø—Ä–∏–º–µ—Ä –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é

–°–æ–∑–¥–∞–¥–∏–º cronjob.yaml:
```yaml
apiVersion: batch/v1
kind: CronJob
metadata:
  name: hello-cron
spec:
  schedule: "*/1 * * * *"  # –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
  jobTemplate:
    spec:
      template:
        spec:
          containers:
            - name: hello
              image: busybox
              command: ["sh", "-c", "date; echo Hello from CronJob"]
          restartPolicy: OnFailure
```
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:

- schedule ‚Äî cron –≤—ã—Ä–∞–∂–µ–Ω–∏–µ
- jobTemplate ‚Äî —à–∞–±–ª–æ–Ω Job
- restartPolicy: OnFailure ‚Üí –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—à–∏–±–∫–µ

–ü—Ä–æ–≤–µ—Ä—è–µ–º:
```bash
kubectl apply -f cronjob.yaml
kubectl get cronjobs
kubectl get jobs
```
–ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –Ω–æ–≤—ã–π Job, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –∏ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è.

üîµ 4. –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è Job –∏ CronJob
```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ Jobs
kubectl get jobs

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ CronJobs
kubectl get cronjobs

# –ü–æ–¥—Ä–æ–±–Ω–æ –æ Job
kubectl describe job hello-job

# –õ–æ–≥–∏ Pod Job
kubectl logs <pod-name>
```
üîµ 5. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- Job –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–æ Completion
- –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ Pod‚Äô—ã (spec.parallelism)
- CronJob —Å–æ–∑–¥–∞—ë—Ç Job –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- –ú–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å —Å–∫–æ–ª—å–∫–æ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö Job —Ö—Ä–∞–Ω–∏—Ç—å (successful/failedHistoryLimit)

### –£–†–û–ö 11. Helm ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤ –¥–ª—è Kubernetes
üîµ 1. –ß—Ç–æ —Ç–∞–∫–æ–µ Helm

Helm ‚Äî —ç—Ç–æ –∞–Ω–∞–ª–æ–≥ apt/yum –¥–ª—è Kubernetes:

- —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∞–∫–µ—Ç–∞–º–∏ (Charts)
- –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–ø–ª–æ–∏—Ç—å —Å–ª–æ–∂–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
- —Ö—Ä–∞–Ω–∏—Ç –≤–µ—Ä—Å–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- —É–º–µ–µ—Ç –¥–µ–ª–∞—Ç—å rollback
- –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —à–∞–±–ª–æ–Ω—ã –¥–ª—è –∫–æ–Ω—Ñ–∏–≥–æ–≤ (values.yaml)

–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Helm:
- Helm CLI ‚Äî –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã
- Chart ‚Äî –ø–∞–∫–µ—Ç —Å –∫–æ–Ω—Ñ–∏–≥–∞–º–∏ Kubernetes

Repository ‚Äî –º–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è Charts

üîµ 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Helm
Linux/macOS:
```bash
curl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash
helm version
```
üîµ 3. –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Helm
```bash
# –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Chart
helm repo add bitnami https://charts.bitnami.com/bitnami

# –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ Chart‚Äô–æ–≤
helm repo update

# –ù–∞–π—Ç–∏ Chart
helm search repo nginx

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Chart
helm install my-nginx bitnami/nginx

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ä–µ–ª–∏–∑—ã
helm list

# –£–¥–∞–ª–∏—Ç—å —Ä–µ–ª–∏–∑
helm uninstall my-nginx

# –û–±–Ω–æ–≤–∏—Ç—å —Ä–µ–ª–∏–∑ —Å –Ω–æ–≤—ã–º values.yaml
helm upgrade my-nginx bitnami/nginx -f values.yaml
```

üîµ 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Chart

Chart ‚Äî —ç—Ç–æ –ø–∞–ø–∫–∞ —Å —Ñ–∞–π–ª–∞–º–∏ Kubernetes:
```bash
mychart/
‚îú‚îÄ‚îÄ Chart.yaml         # –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ Chart
‚îú‚îÄ‚îÄ values.yaml        # –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
‚îú‚îÄ‚îÄ templates/         # —à–∞–±–ª–æ–Ω—ã Kubernetes (Deployment, Service, Ingress)
‚îî‚îÄ‚îÄ charts/            # –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–ø–æ–¥—á–∞—Ä—Ç)
```
üîµ 5. –ü—Ä–∏–º–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–∫–∏ nginx —á–µ—Ä–µ–∑ Helm
```bash
helm repo add bitnami https://charts.bitnami.com/bitnami
helm repo update
helm install nginx-demo bitnami/nginx
```
–ü—Ä–æ–≤–µ—Ä—è–µ–º:
```bash
kubectl get pods
kubectl get svc
```
Helm —Å–æ–∑–¥–∞–ª Deployment, Service, PVC –∏ –≤—Å–µ –∫–æ–Ω—Ñ–∏–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

–ï—Å–ª–∏ –∑–∞—Ö–æ—á–µ—à—å –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥:
```bash
helm upgrade nginx-demo bitnami/nginx -f values.yaml
```
Rollback:
```bash
helm rollback nginx-demo 1
```
### –£–†–û–ö 12. Network Policies ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å —Ç—Ä–∞—Ñ–∏–∫–∞
üîµ 1. –ó–∞—á–µ–º –Ω—É–∂–Ω—ã Network Policies

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ Kubernetes:

- –í—Å–µ Pod‚Äô—ã –º–æ–≥—É—Ç –æ–±—â–∞—Ç—å—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º
- –õ—é–±–æ–π Pod –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –≤ –ª—é–±–æ–π —Å–µ—Ä–≤–∏—Å –∏–ª–∏ Pod

‚ùå –≠—Ç–æ –æ–ø–∞—Å–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
- –ü–æ–¥ –∞—Ç–∞–∫–æ–≤–∞–Ω–Ω—ã–º Pod –º–æ–∂–µ—Ç –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è –¥–æ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –º–æ–≥—É—Ç —Å–ª—É—á–∞–π–Ω–æ –æ–±—â–∞—Ç—å—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º
- –ù–µ–ª—å–∑—è –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–º —Å–µ—Ä–≤–∏—Å–∞–º

‚û° –†–µ—à–µ–Ω–∏–µ: Network Policy ‚Äî –ø—Ä–∞–≤–∏–ª–∞, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑—Ä–µ—à–∞—é—Ç –∏–ª–∏ –∑–∞–ø—Ä–µ—â–∞—é—Ç —Ç—Ä–∞—Ñ–∏–∫.

üîµ 2. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Network Policy

Network Policy —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ Pod:
- podSelector ‚Äî –∫ –∫–∞–∫–∏–º Pod –ø—Ä–∏–º–µ–Ω—è—Ç—å –ø—Ä–∞–≤–∏–ª–æ
- ingress ‚Äî –∫—Ç–æ –º–æ–∂–µ—Ç –∫ –Ω–∏–º –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è
- egress ‚Äî –∫—É–¥–∞ Pod –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è
- policyTypes ‚Äî Ingress, Egress –∏–ª–∏ –æ–±–∞

–í–Ω–∏–º–∞–Ω–∏–µ: Network Policy —Ç–æ–ª—å–∫–æ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Ç—Ä–∞—Ñ–∏–∫, –≤—Å—ë, —á—Ç–æ –Ω–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ, –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è (–µ—Å–ª–∏ CNI –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç).

üîµ 3. –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä: —Ä–∞–∑—Ä–µ—à–∞–µ–º –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ Pod

–°–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª networkpolicy.yaml:
```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-nginx
  namespace: default
spec:
  podSelector:
    matchLabels:
      app: nginx
  policyTypes:
    - Ingress
  ingress:
    - from:
        - podSelector:
            matchLabels:
              app: frontend
      ports:
        - protocol: TCP
          port: 80
```
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:

–ü—Ä–∞–≤–∏–ª–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ –∫ Pod —Å app=nginx

–†–∞–∑—Ä–µ—à–∞–µ–º —Ç—Ä–∞—Ñ–∏–∫ —Ç–æ–ª—å–∫–æ –æ—Ç Pod —Å app=frontend

TCP –ø–æ—Ä—Ç 80

–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ Pod‚Äô—ã –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ –≤—Ö–æ–¥—è—â–µ–º —Ç—Ä–∞—Ñ–∏–∫–µ.

üîµ 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ Network Policy

1. –°–æ–∑–¥–∞–π –¥–≤–∞ Pod: frontend –∏ nginx
```bash
kubectl run frontend --image=busybox --command -- sleep 3600
kubectl run test --image=busybox --command -- sleep 3600
```
2. –ü–æ–ø—Ä–æ–±—É–π –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ nginx —Å —Ä–∞–∑–Ω—ã—Ö Pod:
```bash
kubectl exec -it frontend -- wget -qO- http://nginx
kubectl exec -it test -- wget -qO- http://nginx
```
* frontend ‚Üí –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–π—Ç–∏
* test ‚Üí –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ

üîµ 5. Egress –ø—Ä–∞–≤–∏–ª–∞ (–∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫)

NetworkPolicy –º–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫:
```yaml
egress:
  - to:
      - podSelector:
          matchLabels:
            app: db
    ports:
      - protocol: TCP
        port: 5432
```
Pod –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –∫ Pod —Å app=db –Ω–∞ –ø–æ—Ä—Ç 5432

üîµ 6. –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

* –¢—Ä–µ–±—É–µ—Ç—Å—è CNI –ø–ª–∞–≥–∏–Ω —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π NetworkPolicy (Calico, Cilium, Kube-router)
* NetworkPolicy –Ω–µ —Å–æ–∑–¥–∞—ë—Ç Pod, —Ç–æ–ª—å–∫–æ –ø—Ä–∞–≤–∏–ª–∞ —Ç—Ä–∞—Ñ–∏–∫–∞
* –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Pod —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –≤–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫
* –ü–æ–ª–∏—Ç–∏–∫–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ –≤—ã–±—Ä–∞–Ω–Ω—ã–º Pod

### –£–†–û–ö 13. RBAC ‚Äî Role-Based Access Control
üîµ 1. –ó–∞—á–µ–º –Ω—É–∂–µ–Ω RBAC

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:

* –õ—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ API –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å –≤—Å—ë
* –í –±–æ–ª—å—à–∏—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞—Ö —ç—Ç–æ –∫—Ä–∞–π–Ω–µ –æ–ø–∞—Å–Ω–æ
* –ù—É–∂–Ω–æ —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –ø—Ä–∞–≤–∞ –¥–ª—è:
* –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
* –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
* CI/CD —Å–∏—Å—Ç–µ–º
* –°–µ—Ä–≤–∏—Å–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤

‚û° RBAC –ø–æ–º–æ–≥–∞–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–∞–≤–∞–º–∏ –ø–æ —Ä–æ–ª—è–º –∏ –æ–±—ä–µ–∫—Ç–∞–º.

üîµ 2. –û—Å–Ω–æ–≤–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã RBAC

* Role ‚Äî –ø—Ä–∞–≤–∞ –≤ —Ä–∞–º–∫–∞—Ö namespace
* ClusterRole ‚Äî –ø—Ä–∞–≤–∞ –Ω–∞ –≤–µ—Å—å –∫–ª–∞—Å—Ç–µ—Ä
* RoleBinding ‚Äî —Å–≤—è–∑—ã–≤–∞–µ—Ç Role —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º/—Å–µ—Ä–≤–∏—Å–æ–º –≤ namespace
* ClusterRoleBinding ‚Äî —Å–≤—è–∑—ã–≤–∞–µ—Ç ClusterRole —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º/—Å–µ—Ä–≤–∏—Å–æ–º –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–ª–∞—Å—Ç–µ—Ä–∞

üîµ 3. –ü—Ä–∏–º–µ—Ä: –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ Pods –≤ namespace

–°–æ–∑–¥–∞–¥–∏–º namespace:
```bash
kubectl create namespace dev
```
–°–æ–∑–¥–∞–¥–∏–º Role pod-reader.yaml:
```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  namespace: dev
  name: pod-reader
rules:
  - apiGroups: [""]
    resources: ["pods"]
    verbs: ["get", "list", "watch"]
```
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:

* –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞—Ç—å Pods
* verbs = get, list, watch ‚Üí –Ω–µ–ª—å–∑—è —Å–æ–∑–¥–∞–≤–∞—Ç—å/—É–¥–∞–ª—è—Ç—å Pod

üîµ 4. RoleBinding ‚Äî —Å–≤—è–∑—ã–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç —Å —Ä–æ–ª—å—é

–°–æ–∑–¥–∞–¥–∏–º rolebinding.yaml:
```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: read-pods-binding
  namespace: dev
subjects:
  - kind: User
    name: alice
    apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: Role
  name: pod-reader
  apiGroup: rbac.authorization.k8s.io
```
–¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å alice –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞—Ç—å Pods –≤ namespace dev.

üîµ 5. ClusterRole –∏ ClusterRoleBinding

–î–ª—è –ø—Ä–∞–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ –≤—Å–µ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞:
```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: cluster-admin
rules:
  - apiGroups: ["*"]
    resources: ["*"]
    verbs: ["*"]
```
–ò binding:
```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: alice-admin
subjects:
  - kind: User
    name: alice
    apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: ClusterRole
  name: cluster-admin
  apiGroup: rbac.authorization.k8s.io
```

üîµ 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ RBAC
```bash
# –°–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π –≤ namespace
kubectl get roles -n dev

# –°–ø–∏—Å–æ–∫ RoleBinding
kubectl get rolebinding -n dev

# –°–ø–∏—Å–æ–∫ ClusterRole
kubectl get clusterrole

# –°–ø–∏—Å–æ–∫ ClusterRoleBinding
kubectl get clusterrolebinding
```
–£–†–û–ö 14. Metrics –∏ HPA ‚Äî –∞–≤—Ç–æ—Å–∫–µ–π–ª–∏–Ω–≥ Pod‚Äô–æ–≤ –ø–æ –Ω–∞–≥—Ä—É–∑–∫–µ
üîµ 1. –ó–∞—á–µ–º –Ω—É–∂–µ–Ω HPA

–í Kubernetes –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å Pod‚Äô—ã —Å—Ç–∞—Ç–∏—á–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä:
```yaml
replicas: 2
```
–ù–æ —á—Ç–æ, –µ—Å–ª–∏ –Ω–∞–≥—Ä—É–∑–∫–∞:

* —Ä–∞—Å—Ç—ë—Ç —Ä–µ–∑–∫–æ ‚Üí –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∞–¥–∞–µ—Ç
* —Å–Ω–∏–∂–∞–µ—Ç—Å—è ‚Üí –ø—Ä–æ—Å—Ç–∞–∏–≤–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã

‚úÖ –†–µ—à–µ–Ω–∏–µ: Horizontal Pod Autoscaler (HPA).

HPA:

* –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–µ–Ω—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ Pod‚Äô–æ–≤
* –Ω–∞ –æ—Å–Ω–æ–≤–µ CPU, –ø–∞–º—è—Ç–∏ –∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
* –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å Metrics Server

üîµ 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Metrics Server

HPA —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å Metrics API, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç Metrics Server.
```bash
kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml
kubectl get deployment metrics-server -n kube-system
```
–ü—Ä–æ–≤–µ—Ä—è–µ–º –º–µ—Ç—Ä–∏–∫–∏ Pod:
```bash
kubectl top pod
kubectl top node
```
üîµ 3. –ü—Ä–∏–º–µ—Ä Deployment –¥–ª—è –∞–≤—Ç–æ—Å–∫–µ–π–ª–∏–Ω–≥–∞

–°–æ–∑–¥–∞–¥–∏–º hpa-deployment.yaml:
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: hpa-demo
spec:
  replicas: 1
  selector:
    matchLabels:
      app: hpa-demo
  template:
    metadata:
      labels:
        app: hpa-demo
    spec:
      containers:
        - name: web
          image: nginx
          resources:
            requests:
              cpu: 100m
            limits:
              cpu: 500m
```
üîµ 4. –°–æ–∑–¥–∞—ë–º HPA
```yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: hpa-demo
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: hpa-demo
  minReplicas: 1
  maxReplicas: 5
  metrics:
    - type: Resource
      resource:
        name: cpu
        target:
          type: Utilization
          averageUtilization: 50
```
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
* scaleTargetRef ‚Üí –∫–∞–∫–æ–π Deployment —Å–∫–µ–π–ª–∏—Ç—å
* minReplicas –∏ maxReplicas ‚Üí –¥–∏–∞–ø–∞–∑–æ–Ω
* metrics ‚Üí CPU 50% average ‚Üí –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º

–ü—Ä–∏–º–µ–Ω—è–µ–º:
```bash
kubectl apply -f hpa-deployment.yaml
kubectl apply -f hpa.yaml
kubectl get hpa
```
üîµ 5. –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ—Å–∫–µ–π–ª–∏–Ω–≥

1. –°–æ–∑–¥–∞—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ Pod (–Ω–∞–ø—Ä–∏–º–µ—Ä —Å kubectl run -i --tty load --image=busybox -- /bin/sh)
2. –í–Ω—É—Ç—Ä–∏:
```bash
while true; do wget -q -O- http://hpa-demo; done
```
3. HPA —É–≤–µ–ª–∏—á–∏—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ Pod‚Äô–æ–≤ –¥–æ maxReplicas
4. –ö–æ–≥–¥–∞ –Ω–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∞–¥—ë—Ç ‚Üí Pod‚Äô—ã —É–º–µ–Ω—å—à–∞—Ç—Å—è –¥–æ minReplicas

### –£–†–û–ö 15. Pod Disruption Budget (PDB) –∏ Anti-Affinity
üîµ 1. –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ

–í Kubernetes Pod –º–æ–∂–µ—Ç –±—ã—Ç—å —É–¥–∞–ª—ë–Ω:

* –≤—Ä—É—á–Ω—É—é (kubectl delete pod)
* –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ Deployment/StatefulSet
* –ø—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏
* –ø—Ä–∏ —ç–≤–∞–∫—É–∞—Ü–∏–∏ Node (drain, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–æ–¥—ã)

‚ùå –ë–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª—è –º–æ–∂–Ω–æ –ø–æ—Ç–µ—Ä—è—Ç—å –≤—Å–µ Pod‚Äô—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ ‚Üí —Å–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.

‚úÖ –†–µ—à–µ–Ω–∏–µ:

* Pod Disruption Budget (PDB) ‚Äî –ª–∏–º–∏—Ç –Ω–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è Pod‚Äô–æ–≤
* Pod Affinity / Anti-Affinity ‚Äî –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è Pod‚Äô–æ–≤ –Ω–∞ –Ω–æ–¥–∞—Ö

üîµ 2. Pod Disruption Budget (PDB)

PDB –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —Å–∫–æ–ª—å–∫–æ Pod‚Äô–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ.

–ü—Ä–∏–º–µ—Ä: Deployment —Å 3 Pod‚Äô–∞–º–∏, PDB:
```bash
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: web-pdb
spec:
  minAvailable: 2
  selector:
    matchLabels:
      app: web
```
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:

- minAvailable: 2 ‚Üí –Ω–µ –±–æ–ª–µ–µ 1 Pod –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —É–¥–∞–ª—ë–Ω/–Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- Kubernetes –±—É–¥–µ—Ç –æ—Ç–∫–ª–æ–Ω—è—Ç—å drain/eviction, –µ—Å–ª–∏ –Ω–∞—Ä—É—à–∏—Ç—Å—è PDB
–ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
kubectl get pdb
kubectl describe pdb web-pdb 
```
üîµ 3. Pod Affinity –∏ Anti-Affinity

–ü–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º Pod‚Äô–æ–≤ –ø–æ –Ω–æ–¥–∞–º.

‚úî Anti-Affinity (—Ä–∞–∑–Ω–µ—Å—Ç–∏ Pod‚Äô—ã –ø–æ –Ω–æ–¥–∞–º)
```yaml
affinity:
  podAntiAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      - labelSelector:
          matchExpressions:
            - key: app
              operator: In
              values:
                - web
        topologyKey: "kubernetes.io/hostname"
```
* topologyKey: hostname ‚Üí Pod‚Äô—ã —Å label app=web –Ω–µ –±—É–¥—É—Ç –Ω–∞ –æ–¥–Ω–æ–π –Ω–æ–¥–µ
* –ù—É–∂–Ω–æ –¥–ª—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ ‚Üí –µ—Å–ª–∏ Node —É–ø–∞–¥—ë—Ç, —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å Pod‚Äô–æ–≤ —Å–ª–æ–º–∞–µ—Ç—Å—è

‚úî Affinity (—Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å Pod —Ä—è–¥–æ–º —Å –¥—Ä—É–≥–∏–º–∏ Pod‚Äô–∞–º–∏)
```yaml
affinity:
  podAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      - labelSelector:
          matchExpressions:
            - key: app
              operator: In
              values:
                - database
        topologyKey: "kubernetes.io/zone"
```
–†–∞–∑–º–µ—â–∞–µ—Ç Pod —Ä—è–¥–æ–º —Å –¥—Ä—É–≥–∏–º–∏ Pod‚Äô–∞–º–∏ —Å –Ω—É–∂–Ω—ã–º–∏ label –ø–æ –∑–æ–Ω–µ/–Ω–æ–¥–µ

üîµ 4. –ü—Ä–∏–º–µ—Ä Deployment —Å Anti-Affinity –∏ PDB
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: web
spec:
  replicas: 3
  selector:
    matchLabels:
      app: web
  template:
    metadata:
      labels:
        app: web
    spec:
      affinity:
        podAntiAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            - labelSelector:
                matchExpressions:
                  - key: app
                    operator: In
                    values:
                      - web
              topologyKey: "kubernetes.io/hostname"
      containers:
        - name: web
          image: nginx
          ports:
            - containerPort: 80
---
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: web-pdb
spec:
  minAvailable: 2
  selector:
    matchLabels:
      app: web
```
–ü—Ä–æ–≤–µ—Ä—è–µ–º:
```bash
kubectl apply -f web-affinity-pdb.yaml
kubectl get pods -o wide
kubectl get pdb
```
–¢–µ–ø–µ—Ä—å:

* Pod‚Äô—ã —Ä–∞–∑–Ω–µ—Å–µ–Ω—ã –ø–æ –Ω–æ–¥–∞–º
* Eviction/Drain –æ–≥—Ä–∞–Ω–∏—á–µ–Ω PDB
* –ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å —Å—Ä–∞–∑—É –≤—Å–µ Pod‚Äô—ã

### –£–†–û–ö 16. Ingress –∏ LoadBalancer ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–∏–º –¥–æ—Å—Ç—É–ø–æ–º
üîµ 1. –ü–æ—á–µ–º—É –Ω—É–∂–µ–Ω Ingress / LoadBalancer

–í Kubernetes –µ—Å—Ç—å —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–∞ –¥–∞—Ç—å –≤–Ω–µ—à–Ω–µ–º—É –º–∏—Ä—É –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å—É:

1. NodePort
* –ü—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±
* –ü—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç –Ω–∞ –∫–∞–∂–¥–æ–π –Ω–æ–¥–µ
* –ù–µ —É–¥–æ–±–Ω–æ –¥–ª—è production

2. LoadBalancer

* –°–æ–∑–¥–∞—ë—Ç –≤–Ω–µ—à–Ω–∏–π –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ (–æ–±—ã—á–Ω–æ –≤ –æ–±–ª–∞–∫–µ)
* –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ–º –æ–±–ª–∞—á–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ Pod‚Äô—ã

3. Ingress
* –£–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ HTTP(S)
* –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è, path-based routing, TLS
* –ù—É–∂–µ–Ω Ingress Controller (nginx, traefik, contour)

üîµ 2. Service —Ç–∏–ø–∞ LoadBalancer

–ü—Ä–∏–º–µ—Ä:
```yaml
apiVersion: v1
kind: Service
metadata:
  name: nginx-lb
spec:
  type: LoadBalancer
  selector:
    app: nginx
  ports:
    - protocol: TCP
      port: 80
      targetPort: 80
```
- Kubernetes —Å–æ–∑–¥–∞—Å—Ç –≤–Ω–µ—à–Ω–∏–π IP (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä)
- –¢—Ä–∞—Ñ–∏–∫ –Ω–∞ IP ‚Üí –ø–æ–ø–∞–¥—ë—Ç –Ω–∞ Pod‚Äô—ã —Å label app=nginx

–ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
kubectl get svc nginx-lb
```
–í —Å—Ç–æ–ª–±—Ü–µ EXTERNAL-IP –ø–æ—è–≤–∏—Ç—Å—è IP (–∏–ª–∏ <pending> –µ—Å–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä minikube)

üîµ 3. Ingress ‚Äî –ø—Ä–∏–º–µ—Ä –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ HTTP

1. –£—Å—Ç–∞–Ω–æ–≤–∏–º Ingress Controller (nginx):
```bash
kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.9.1/deploy/static/provider/cloud/deploy.yaml
```
2. –°–æ–∑–¥–∞–¥–∏–º Deployment + Service:
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx
spec:
  replicas: 2
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
        - name: nginx
          image: nginx
          ports:
            - containerPort: 80
---
apiVersion: v1
kind: Service
metadata:
  name: nginx-service
spec:
  selector:
    app: nginx
  ports:
    - port: 80
      targetPort: 80
```
3. –°–æ–∑–¥–∞–¥–∏–º Ingress:
```yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: nginx-ingress
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
spec:
  rules:
    - host: nginx.example.com
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: nginx-service
                port:
                  number: 80
```
üîµ 4. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Ingress

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí nginx.example.com
- DNS ‚Üí Ingress Controller
- Ingress Controller ‚Üí Service ‚Üí Pod

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Ingress:
- Path-based routing (/api, /web)
- TLS/HTTPS
- Load balancing –º–µ–∂–¥—É Pod‚Äô–∞–º–∏
- Rewrite –∏ redirects

üîµ 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ Ingress

1. –í /etc/hosts –¥–æ–±–∞–≤—å—Ç–µ:
```bash
<IP-IngressController> nginx.example.com
```
2. –ü–∏–Ω–≥—É–µ–º:
```bash
curl http://nginx.example.com
```
–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É nginx.

3. –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—ä–µ–∫—Ç—ã:
```bash
kubectl get ingress
kubectl describe ingress nginx-ingress
kubectl get svc -n ingress-nginx 
```
### –£–†–û–ö 17. Secrets –∏ ConfigMaps ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–∞–º–∏ –∏ –ø–∞—Ä–æ–ª—è–º–∏
üîµ 1. –ó–∞—á–µ–º –Ω—É–∂–Ω—ã ConfigMaps –∏ Secrets

–í Kubernetes:

–ù–µ –ø—Ä–∏–Ω—è—Ç–æ —Ö–∞—Ä–¥–∫–æ–¥–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (URL –±–∞–∑—ã, API –∫–ª—é—á–∏, —Ñ–ª–∞–≥–∏)

–í—Å—ë —Ö—Ä–∞–Ω–∏—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –º–µ–Ω—è—Ç—å –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞

–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ:

* –¢–∏–ø	–î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
* ConfigMap	–û–±—ã—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (URLs, –ø–æ—Ä—Ç—ã, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏—á)
* Secret	–°–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø–∞—Ä–æ–ª–∏, —Ç–æ–∫–µ–Ω—ã, –∫–ª—é—á–∏ TLS)
üîµ 2. ConfigMap ‚Äî –ø—Ä–∏–º–µ—Ä

–°–æ–∑–¥–∞–¥–∏–º configmap.yaml:
```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  APP_MODE: production
  API_URL: "https://api.example.com"
```
–ò—Å–ø–æ–ª—å–∑—É–µ–º –≤ Pod —á–µ—Ä–µ–∑ env:
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: app-pod
spec:
  containers:
    - name: app
      image: busybox
      command: ["sh", "-c", "echo $APP_MODE; sleep 3600"]
      envFrom:
        - configMapRef:
            name: app-config
```
–ü—Ä–∏–º–µ–Ω—è–µ–º:
```bash
kubectl apply -f configmap.yaml
kubectl apply -f pod.yaml
kubectl exec -it app-pod -- sh
echo $APP_MODE   # –í—ã–≤–µ–¥–µ—Ç "production"
```
üîµ 3. Secret ‚Äî –ø—Ä–∏–º–µ—Ä

–°–æ–∑–¥–∞–¥–∏–º Secret:
```yaml
apiVersion: v1
kind: Secret
metadata:
  name: app-secret
type: Opaque
stringData:
  DB_USER: admin
  DB_PASSWORD: supersecret
```
–ò—Å–ø–æ–ª—å–∑—É–µ–º –≤ Pod —á–µ—Ä–µ–∑ env:
```yaml
envFrom:
  - secretRef:
      name: app-secret
```
–ò–ª–∏ –º–æ–Ω—Ç–∏—Ä—É–µ–º –∫–∞–∫ —Ñ–∞–π–ª:
```yaml
volumeMounts:
  - name: secret-volume
    mountPath: /etc/secrets
volumes:
  - name: secret-volume
    secret:
      secretName: app-secret
```
–í Pod —Ñ–∞–π–ª—ã /etc/secrets/DB_USER –∏ /etc/secrets/DB_PASSWORD –±—É–¥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–µ–∫—Ä–µ—Ç—ã.

üîµ 4. –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

- Secret —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ base64, –Ω–æ –Ω–µ —à–∏—Ñ—Ä—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –í production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è Encryption at rest (KMS, Vault)
- ConfigMap –∏ Secret –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å, Pod –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)

üîµ 5. –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```yaml
kubectl get configmaps
kubectl describe configmap app-config
kubectl get secrets
kubectl describe secret app-secret
kubectl get secret app-secret -o yaml   # base64 –∑–Ω–∞—á–µ–Ω–∏—è
```
### –£–†–û–ö 18. StatefulSet + PVC + StorageClass ‚Äî –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
üîµ 1. –ó–∞—á–µ–º –Ω—É–∂–µ–Ω StatefulSet

- Deployment —Ö–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è stateless-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (nginx, frontend).
- –ù–æ –¥–ª—è stateful-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (PostgreSQL, Redis, Kafka):
- –ù—É–∂–Ω—ã —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ Pod‚Äô–æ–≤ (pod-0, pod-1)
- –ù—É–∂–µ–Ω –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –¥–∏—Å–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ Pod‚Äô–∞
- –í–∞–∂–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –∑–∞–ø—É—Å–∫–∞ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ Pod‚Äô–æ–≤

‚úÖ –†–µ—à–µ–Ω–∏–µ: StatefulSet

üîµ 2. PersistentVolume (PV) –∏ PersistentVolumeClaim (PVC)
- PV ‚Äî —Ä–µ–∞–ª—å–Ω—ã–π —Ä–µ—Å—É—Ä—Å —Ö—Ä–∞–Ω–µ–Ω–∏—è (–Ω–∞ –¥–∏—Å–∫–µ –Ω–æ–¥—ã, NFS, –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
- PVC ‚Äî –∑–∞–ø—Ä–æ—Å –Ω–∞ —Ö—Ä–∞–Ω–µ–Ω–∏–µ (—Ä–∞–∑–º–µ—Ä, –∫–ª–∞—Å—Å, –¥–æ—Å—Ç—É–ø)

–ü—Ä–∏–º–µ—Ä:
```yaml
apiVersion: v1
kind: PersistentVolume
metadata:
  name: pv-data
spec:
  capacity:
    storage: 1Gi
  accessModes:
    - ReadWriteOnce
  hostPath:
    path: /mnt/data
```
```yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: pvc-data
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 1Gi
```
üîµ 3. StorageClass ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ

–ü–æ–∑–≤–æ–ª—è–µ—Ç Kubernetes —Å–æ–∑–¥–∞–≤–∞—Ç—å PV –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∏—Å–ø–æ–ª—å–∑—É—è –æ–±–ª–∞—á–Ω—ã–π –¥–∏—Å–∫ –∏–ª–∏ –¥—Ä—É–≥–æ–π backend.

–ü—Ä–∏–º–µ—Ä StorageClass –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è (minikube):
```yaml
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: fast
provisioner: k8s.io/minikube-hostpath
reclaimPolicy: Delete
volumeBindingMode: Immediate
```
–í –æ–±–ª–∞–∫–µ provisioner –±—É–¥–µ—Ç —Ç–∏–ø–∞ kubernetes.io/aws-ebs –∏–ª–∏ kubernetes.io/gce-pd.

üîµ 4. –ü—Ä–∏–º–µ—Ä StatefulSet —Å PVC
```yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: web
spec:
  serviceName: "web"
  replicas: 3
  selector:
    matchLabels:
      app: web
  template:
    metadata:
      labels:
        app: web
    spec:
      containers:
        - name: nginx
          image: nginx
          ports:
            - containerPort: 80
          volumeMounts:
            - name: web-data
              mountPath: /usr/share/nginx/html
  volumeClaimTemplates:
    - metadata:
        name: web-data
      spec:
        accessModes: ["ReadWriteOnce"]
        resources:
          requests:
            storage: 1Gi
        storageClassName: fast
```
–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:

- volumeClaimTemplates ‚Üí –¥–ª—è –∫–∞–∂–¥–æ–≥–æ Pod —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–≤–æ–π PVC
- Pod‚Äô—ã –∏–º–µ—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞: web-0, web-1, web-2
- –ö–∞–∂–¥—ã–π Pod –º–æ–Ω—Ç–∏—Ä—É–µ—Ç —Å–≤–æ–π –¥–∏—Å–∫, –¥–∞–Ω–Ω—ã–µ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ Pod‚Äô–∞

üîµ 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ StatefulSet
```bash
kubectl apply -f statefulset.yaml
kubectl get pods
kubectl get pvc
kubectl describe statefulset web
```
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞–∂–¥—ã–π Pod –∏–º–µ–µ—Ç —Å–≤–æ—é PVC
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ Pod, PVC –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- –ü—Ä–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–∏ Pod ‚Üí –¥–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è

### –£–†–û–ö 19. CRD –∏ Operator ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ Kubernetes
üîµ 1. –ó–∞—á–µ–º –Ω—É–∂–Ω—ã CRD –∏ Operator

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Kubernetes –∑–Ω–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã:

Pod, Deployment, Service, StatefulSet, ConfigMap, Secret‚Ä¶

–ß—Ç–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å:

- –ë–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- ML-–º–æ–¥–µ–ª—å—é –∏ –µ—ë lifecycle
- –°–ª–æ–∂–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

‚úÖ –†–µ—à–µ–Ω–∏–µ:

Custom Resource Definition (CRD) ‚Äî –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã –≤ Kubernetes

Operator ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç —ç—Ç–∏–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ)

üîµ 2. CRD ‚Äî –ø—Ä–∏–º–µ—Ä

–°–æ–∑–¥–∞–¥–∏–º CRD –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º App:
```yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: apps.example.com
spec:
  group: example.com
  versions:
    - name: v1
      served: true
      storage: true
      schema:
        openAPIV3Schema:
          type: object
          properties:
            spec:
              type: object
              properties:
                replicas:
                  type: integer
  scope: Namespaced
  names:
    plural: apps
    singular: app
    kind: App
    shortNames:
    - ap
```
–ü–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç App –≤ namespace:
```bash
kubectl get crd
kubectl api-resources | grep app
```

üîµ 3. –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ CRD
```yaml
apiVersion: example.com/v1
kind: App
metadata:
  name: my-app
spec:
  replicas: 3
```

–≠—Ç–æ –Ω–µ —Å–æ–∑–¥–∞—Å—Ç Deployment –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚Äî –¥–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–µ–Ω Operator.

üîµ 4. Operator ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

Operator ‚Äî —ç—Ç–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–±–ª—é–¥–∞–µ—Ç –∑–∞ –æ–±—ä–µ–∫—Ç–∞–º–∏ CRD –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è:
* –°–æ–∑–¥–∞—ë—Ç Deployment/Service –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ App
* –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç Pod‚Äô—ã –ø–æ replicas
* –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥, —É–ø—Ä–∞–≤–ª—è–µ—Ç backup –∏ recovery

–ï—Å—Ç—å –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ frameworks –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è Operator:
* Operator SDK  (Go)
* Kopf (Python)
* Metacontroller

–ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Å—Ç–æ–π –ª–æ–≥–∏–∫–∏:
- –°–æ–∑–¥–∞–Ω –æ–±—ä–µ–∫—Ç App
- Operator –≤–∏–¥–∏—Ç replicas: 3 ‚Üí —Å–æ–∑–¥–∞—ë—Ç Deployment —Å 3 Pod‚Äô–∞–º–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑–º–µ–Ω—è–µ—Ç replicas: 5 ‚Üí Operator –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç Deployment

üîµ 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ CRD
```bash
kubectl get crd
kubectl get app   # –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç
kubectl describe app my-app
```
–ï—Å–ª–∏ –µ—Å—Ç—å Operator, –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Deployment –±—ã–ª —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

üîµ 6. –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

CRD —Ç–æ–ª—å–∫–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –æ–±—ä–µ–∫—Ç, –Ω–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ—Å—É—Ä—Å–∞–º–∏

Operator ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π, –Ω—É–∂–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
* Databases (PostgreSQL Operator, MongoDB Operator)
* Kafka, Redis, Elasticsearch
* ML-–º–æ–¥–µ–ª–µ–π, –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### –£–†–û–ö 20. Kubernetes Security Best Practices
üîµ 1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º (RBAC)

Role / ClusterRole ‚Äî —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä–∞–≤ –Ω–∞ namespace –∏–ª–∏ –≤–µ—Å—å –∫–ª–∞—Å—Ç–µ—Ä

RoleBinding / ClusterRoleBinding ‚Äî —Å–≤—è–∑—ã–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/—Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç —Å —Ä–æ–ª—å—é

–ü—Ä–∞–∫—Ç–∏–∫–∞:

- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–∞—ë–º –≤—Å–µ–º –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø (cluster-admin)
- –†–∞–∑–¥–µ–ª—è–µ–º —Ä–æ–ª–∏: developer, QA, admin, CI/CD —Å–µ—Ä–≤–∏—Å—ã
- –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–µ—Ä–≤–∏—Å–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã –¥–ª—è Pod‚Äô–æ–≤, –∞ –Ω–µ root
```bash
kubectl create role pod-reader --verb=get,list,watch --resource=pods -n dev
kubectl create rolebinding dev-reader --role=pod-reader --user=alice -n dev
```
üîµ 2. –°–µ–∫—Ä–µ—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

* Secrets –¥–ª—è –ø–∞—Ä–æ–ª–µ–π, —Ç–æ–∫–µ–Ω–æ–≤, –∫–ª—é—á–µ–π
* ConfigMaps –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤
* –®–∏—Ñ—Ä—É–µ–º Secrets –Ω–∞ —É—Ä–æ–≤–Ω–µ etcd:
```yaml
apiVersion: apiserver.config.k8s.io/v1
kind: EncryptionConfiguration
resources:
  - resources:
      - secrets
    providers:
      - aescbc:
          keys:
            - name: key1
              secret: <base64-key>
      - identity: {}
```
–ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö–∞—Ä–¥–∫–æ–¥–∏–º –ø–∞—Ä–æ–ª–∏ –≤ –æ–±—Ä–∞–∑–∞—Ö

üîµ 3. Network Policies

–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ç—Ä–∞—Ñ–∏–∫ –º–µ–∂–¥—É Pod‚Äô–∞–º–∏

–ü—Ä–∏–º–µ—Ä: —Ç–æ–ª—å–∫–æ frontend –º–æ–∂–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ backend
```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-frontend
spec:
  podSelector:
    matchLabels:
      app: backend
  policyTypes:
    - Ingress
  ingress:
    - from:
        - podSelector:
            matchLabels:
              app: frontend
      ports:
        - protocol: TCP
          port: 8080
```
–ò—Å–ø–æ–ª—å–∑—É–µ–º CNI —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π NetworkPolicy (Calico, Cilium)

üîµ 4. Pod Security

PodSecurityContext ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```yaml
securityContext:
  runAsUser: 1000
  runAsGroup: 3000
  fsGroup: 2000
  allowPrivilegeEscalation: false
```
Pod Security Standards / Admission Controllers:

* restricted ‚Äî –∑–∞–ø—Ä–µ—â–∞–µ—Ç root, hostNetwork, hostPath
* baseline ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
* privileged ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–∞—ë–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É privileged: true –±–µ–∑ –Ω—É–∂–¥—ã

üîµ 5. –ê–≤—Ç–æ—Å–∫–µ–π–ª–∏–Ω–≥ –∏ —Ä–µ—Å—É—Ä—Å—ã

–í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–µ–º requests/limits CPU –∏ –ø–∞–º—è—Ç–∏

–≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç:

* Resource starvation
* –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É HPA
* –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–æ–¥—ã

–ü—Ä–∏–º–µ—Ä:
```yaml
resources:
  requests:
    cpu: "100m"
    memory: "128Mi"
  limits:
    cpu: "500m"
    memory: "512Mi"
```
üîµ 6. –õ–æ–≥–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –°–æ–±–∏—Ä–∞–µ–º –ª–æ–≥–∏ —á–µ—Ä–µ–∑ DaemonSet (fluentd, filebeat)
- –ò—Å–ø–æ–ª—å–∑—É–µ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus, Grafana)
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º alert‚Äô—ã –¥–ª—è —Å–æ–±—ã—Ç–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

üîµ 7. Best Practices Summary

- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ —á–µ—Ä–µ–∑ RBAC
- –°–µ–∫—Ä–µ—Ç—ã —Ö—Ä–∞–Ω–∏–º –≤ Secrets, —à–∏—Ñ—Ä—É–µ–º –Ω–∞ etcd
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ç—Ä–∞—Ñ–∏–∫ —á–µ—Ä–µ–∑ NetworkPolicy
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞–µ–º –Ω–µ root
- –í—Å–µ–≥–¥–∞ –≤—ã—Å—Ç–∞–≤–ª—è–µ–º requests/limits —Ä–µ—Å—É—Ä—Å–æ–≤
- –õ–æ–≥–∏, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ alert‚Äô—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã
- –ò—Å–ø–æ–ª—å–∑—É–µ–º PodDisruptionBudget –∏ Anti-Affinity –¥–ª—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏